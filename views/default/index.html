{{extend 'layout.html'}}

{{block head}}
<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>
  var is_logged_in = {{='false' if auth.user is None else 'true'}};
</script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.4.0/gpx.min.js"></script>
  <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
  <script src="{{=URL('static', 'js/leaflet.filelayer.js')}}"></script>
  <script src="{{=URL('static', 'js/togeojson.js')}}"> </script>
{{end}}


<div class="main_content">
  <!-- map -->
  <div id="mapid">
    <script>
      var mymap = L.map("mapid").setView([36.98, 237.98], 13);
      
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox.streets',
        accessToken: 'pk.eyJ1Ijoia2NvdHRlbiIsImEiOiJjam5qOTBxczQwd3hnM3BvM2g3a3B2amZsIn0.zmWKaRsfmBEdwlU3ejmKqQ'
      }).addTo(mymap);
            
      var style = {color:'red', opacity: 1.0, fillOpacity: 1.0, weight: 2, clickable: false};
      L.Control.FileLayerLoad.LABEL = '<i class="fa fa-folder-open"></i>';
      L.Control.fileLayerLoad({
          fitBounds: true,
          layerOptions: {style: style,
                         pointToLayer: function (data, latlng) {
                              return L.circleMarker(latlng, {style: style});
                         }},
      }).addTo(mymap);
    </script>
  </div>
</div>

<script src="{{=URL('static', 'js/default_index.js')}}"></script>
